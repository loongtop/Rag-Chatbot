# =============================================================================
# SRS Profiles Configuration
# Charter Agent Framework v0.6.5
# =============================================================================
#
# Purpose: Define which SRS sections (from .agent/docs/srs-template.md) are
# applicable for different project types. This avoids N/A noise in documents.
#
# Section Reference (.agent/docs/srs-template.md):
#   §1:   Introduction
#   §2:   Overall Description
#   §3.1: External Interface Requirements
#   §3.2: Functional Requirements
#   §3.3: Performance Requirements
#   §3.4: Logical Database Requirements
#   §3.5: Software System Attributes
#   §3.6: Other Non-Functional Requirements
#   §3.7: C++ Specific Requirements
#   §4:   Java Distributed System Specific
#   §5:   AI Software Specific
#   §6:   Mobile Application Specific
#   §7:   Web Application Specific
#   §8:   Requirements Change Management
#   §9:   Appendices
#
# =============================================================================

# -----------------------------------------------------------------------------
# Profile Definitions
# -----------------------------------------------------------------------------
profiles:
  # ---------------------------------------------------------------------------
  # RAG/LLM Web Application
  # ---------------------------------------------------------------------------
  rag-web:
    description: "RAG/LLM Web 应用（如 Chatbot、知识库问答系统）"
    applicable_to:
      - "RAG Chatbot"
      - "LLM-based Web Service"
      - "Knowledge Base QA"
    
    sections:
      required:
        - "1"       # Introduction
        - "2"       # Overall Description
        - "3.1"     # External Interface Requirements
        - "3.2"     # Functional Requirements
        - "3.3"     # Performance Requirements
        - "3.5"     # Software System Attributes
        - "3.6"     # Other Non-Functional Requirements
        - "5.3"     # AI: Evaluation & Validation
        - "5.5"     # AI: Deployment & Monitoring
        - "7.1"     # Web: Browser Compatibility
        - "7.3"     # Web: Responsive Design
        - "8"       # Requirements Change Management
        - "9"       # Appendices
      
      conditional:
        - section: "5.1"   # AI: Data Requirements
          condition: "if custom training data is used"
        - section: "5.2"   # AI: Model Requirements
          condition: "if fine-tuning or custom models"
        - section: "5.4"   # AI: Ethics & Bias
          condition: "if user-facing content generation"
      
      skip:
        - "3.4"     # Logical Database (details in design)
        - "3.7"     # C++ Specific
        - "4"       # Java Distributed
        - "6"       # Mobile Application

  # ---------------------------------------------------------------------------
  # Python Web API
  # ---------------------------------------------------------------------------
  python-web-api:
    description: "Python Web API 服务（FastAPI/Flask/Django）"
    applicable_to:
      - "REST API"
      - "GraphQL API"
      - "Backend Service"
    
    sections:
      required:
        - "1"
        - "2"
        - "3.1"
        - "3.2"
        - "3.3"
        - "3.5"
        - "3.6"
        - "8"
        - "9"
      
      conditional:
        - section: "7"
          condition: "if includes frontend"
      
      skip:
        - "3.4"
        - "3.7"
        - "4"
        - "5"
        - "6"

  # ---------------------------------------------------------------------------
  # Java Distributed System
  # ---------------------------------------------------------------------------
  java-distributed:
    description: "Java 微服务/分布式系统"
    applicable_to:
      - "Microservices"
      - "Spring Boot"
      - "Distributed Backend"
    
    sections:
      required:
        - "1"
        - "2"
        - "3.1"
        - "3.2"
        - "3.3"
        - "3.5"
        - "3.6"
        - "4.1"     # Service Architecture
        - "4.2"     # Inter-service Communication
        - "4.3"     # Distributed Transactions
        - "4.4"     # Fault Tolerance & HA
        - "4.5"     # Deployment & Orchestration
        - "4.6"     # Monitoring & Observability
        - "4.7"     # JVM Tuning
        - "8"
        - "9"
      
      conditional:
        - section: "3.4"
          condition: "if complex data model"
      
      skip:
        - "3.7"
        - "5"
        - "6"
        - "7"

  # ---------------------------------------------------------------------------
  # C++ Embedded/Monolithic
  # ---------------------------------------------------------------------------
  cpp-embedded:
    description: "C++ 嵌入式/单体软件"
    applicable_to:
      - "Embedded System"
      - "Desktop Application"
      - "Game Engine"
      - "High-Performance Computing"
    
    sections:
      required:
        - "1"
        - "2"
        - "3.1"
        - "3.2"
        - "3.3"
        - "3.5"
        - "3.6"
        - "3.7.1"   # Compilation Environment
        - "3.7.2"   # Memory Management
        - "3.7.3"   # Performance Optimization
        - "3.7.4"   # Third-party Libraries
        - "3.7.5"   # Platform Compatibility
        - "8"
        - "9"
      
      conditional: []
      
      skip:
        - "3.4"
        - "4"
        - "5"
        - "6"
        - "7"

  # ---------------------------------------------------------------------------
  # iOS/Android Mobile Application
  # ---------------------------------------------------------------------------
  mobile-app:
    description: "iOS/Android 移动应用"
    applicable_to:
      - "iOS App"
      - "Android App"
      - "Cross-platform Mobile"
    
    sections:
      required:
        - "1"
        - "2"
        - "3.1"
        - "3.2"
        - "3.3"
        - "3.5"
        - "3.6"
        - "6.1"     # Platform Support
        - "6.2"     # Offline Functionality
        - "6.3"     # Push Notifications
        - "6.4"     # Performance Optimization
        - "8"
        - "9"
      
      conditional:
        - section: "5"
          condition: "if using on-device ML"
      
      skip:
        - "3.4"
        - "3.7"
        - "4"
        - "7"

  # ---------------------------------------------------------------------------
  # Swift iOS/watchOS Application
  # ---------------------------------------------------------------------------
  swift-ios:
    description: "Swift iOS/watchOS 应用"
    applicable_to:
      - "iOS App (Swift)"
      - "watchOS App"
      - "Apple Platform"
    
    sections:
      required:
        - "1"
        - "2"
        - "3.1"
        - "3.2"
        - "3.3"
        - "3.5"
        - "3.6"
        - "6.1"     # Platform Support
        - "6.2"     # Offline Functionality
        - "6.3"     # Push Notifications
        - "6.4"     # Performance Optimization
        - "8"
        - "9"
      
      conditional:
        - section: "5"
          condition: "if using CoreML"
      
      skip:
        - "3.4"
        - "3.7"
        - "4"
        - "7"

  # ---------------------------------------------------------------------------
  # Full-Stack Web Application
  # ---------------------------------------------------------------------------
  fullstack-web:
    description: "全栈 Web 应用（前后端一体）"
    applicable_to:
      - "Next.js"
      - "MERN Stack"
      - "Django + React"
    
    sections:
      required:
        - "1"
        - "2"
        - "3.1"
        - "3.2"
        - "3.3"
        - "3.4"     # Database
        - "3.5"
        - "3.6"
        - "7.1"     # Browser Compatibility
        - "7.2"     # Frontend Framework
        - "7.3"     # Responsive Design
        - "7.4"     # SEO
        - "8"
        - "9"
      
      conditional:
        - section: "5"
          condition: "if AI features integrated"
      
      skip:
        - "3.7"
        - "4"
        - "6"

# -----------------------------------------------------------------------------
# Profile Selection Rules
# -----------------------------------------------------------------------------
selection_rules:
  description: "Rules for auto-detecting profile from charter.yaml"
  
  detection_order:
    - check: "components[*].language_profile"
      priority: 1
    - check: "language_profile"
      priority: 2
    - check: "meta.name / meta.description keywords"
      priority: 3
  
  keyword_mapping:
    rag-web:
      - "rag"
      - "chatbot"
      - "llm"
      - "knowledge base"
    java-distributed:
      - "microservice"
      - "spring"
      - "kafka"
      - "distributed"
    mobile-app:
      - "ios"
      - "android"
      - "mobile"
      - "app"
    cpp-embedded:
      - "embedded"
      - "firmware"
      - "c++"
      - "cpp"

# -----------------------------------------------------------------------------
# Validation Rules
# -----------------------------------------------------------------------------
validation:
  enforce_required: true
  warn_on_missing_conditional: true
  fail_on_unknown_section: false
