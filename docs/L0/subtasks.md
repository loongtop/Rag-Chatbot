---
status: draft
owner: architect
parent_task: rag-chatbot (L0)
layer: L0
---

# Subtasks for: rag-chatbot (L0)

## åˆ†è§£ç­–ç•¥ (Decomposition Strategy)

æœ¬ä»»åŠ¡ä» **L0** åˆ†è§£ä¸º **L1** å±‚ï¼Œåˆ†è§£ä¾æ®ï¼š
- [x] æŒ‰åŠŸèƒ½æ¨¡å—åˆ†è§£
- [x] æŒ‰æ•°æ®æµåˆ†è§£
- [x] æŒ‰ä¾èµ–å…³ç³»åˆ†è§£

---

## å­ä»»åŠ¡åˆ—è¡¨ (Subtasks)

### Subtask 1: api-core

**è·¯å¾„**: `docs/L1/api-core/`

**èŒè´£**:
- åç«¯å¯¹è¯å…¥å£ï¼ˆAI/äººå·¥è·¯ç”±ï¼‰ã€RAG ç¼–æ’ã€å¼•ç”¨è¾“å‡ºã€æ‹’ç­”/æ¾„æ¸…ç­–ç•¥
- LLM Provider é€‚é…ï¼ˆåœ¨çº¿ OpenAI-Compatible + æœ¬åœ° Ollamaï¼‰
- å¯¹è¯å†å²ã€token ç”¨é‡ã€é”™è¯¯ä¸å®¡è®¡æ—¥å¿—ï¼ˆä¸ºæˆæœ¬ä¸è´¨é‡åˆ†ææä¾›æ•°æ®ï¼‰

**è¾“å…¥**:
- æ¥è‡ª: `docs/L0/requirements.md`
- æ•°æ®: ç”¨æˆ·æ¶ˆæ¯ã€ä¸Šä¸‹æ–‡å­—æ®µï¼ˆskuId/productId/urlï¼‰ã€ç™»å½•æ€ï¼ˆå¯é€‰ï¼‰ã€é™„ä»¶ï¼ˆå¯é€‰ï¼‰

**è¾“å‡º**:
- äº§ç‰©: `requirements.md`, `interfaces.md`, `subtasks.md`
- è§¦å‘: knowledge-base / product-catalog / admin-dashboard / chat-widgetï¼ˆä¾èµ–åç«¯æ¥å£ä¸æ•°æ®æ¨¡å‹ï¼‰

**çŠ¶æ€**: â¬œ æœªå¼€å§‹ / ğŸŸ¡ è¿›è¡Œä¸­ / âœ… å·²å®Œæˆ

---

### Subtask 2: knowledge-base

**è·¯å¾„**: `docs/L1/knowledge-base/`

**èŒè´£**:
- æ–‡æ¡£ä¸Šä¼ ã€è§£æï¼ˆæ–‡æ¡£/å›¾ç‰‡ OCR/è§†è§‰ï¼šProvider TBDï¼‰ã€å…¥åº“ä¸å‘é‡ç´¢å¼•ï¼ˆPostgreSQL + pgvectorï¼‰
- ç´¢å¼•æ„å»º/é‡å»º/çŠ¶æ€å¯è§‚æµ‹ï¼›æ£€ç´¢æ’åº/é‡æ’ç­–ç•¥

**è¾“å…¥**:
- æ¥è‡ª: api-coreï¼ˆæ¥å£/æ•°æ®æ¨¡å‹ï¼‰
- æ•°æ®: åå°ä¸Šä¼ æ–‡æ¡£ã€ç´¢å¼•æ„å»ºå‚æ•°ã€Embedding/é‡æ’é…ç½®ï¼ˆéƒ¨åˆ† TBDï¼‰

**è¾“å‡º**:
- äº§ç‰©: `requirements.md`, `interfaces.md`, `subtasks.md`
- è§¦å‘: admin-dashboardï¼ˆç´¢å¼•ç®¡ç† UIï¼‰ï¼Œchat-widgetï¼ˆRAG é—®ç­”ä½“éªŒï¼‰

**çŠ¶æ€**: â¬œ æœªå¼€å§‹ / ğŸŸ¡ è¿›è¡Œä¸­ / âœ… å·²å®Œæˆ

---

### Subtask 3: product-catalog

**è·¯å¾„**: `docs/L1/product-catalog/`

**èŒè´£**:
- äº§å“æ•°æ®å¯¼å…¥ä¸æ ¡éªŒï¼ˆ`data/products.json` å¥‘çº¦ï¼‰ã€åå°ä¸Šä¼ /æ›¿æ¢ã€åŸºç¡€æ£€ç´¢
- äº§å“æ¨è Top-Nï¼ˆé»˜è®¤ 3ï¼‰ä¸äº§å“æ¯”è¾ƒï¼ˆ2â€“4 SKUï¼›å­—æ®µé…ç½® TBDï¼‰

**è¾“å…¥**:
- æ¥è‡ª: api-coreï¼ˆæ¥å£/æ•°æ®æ¨¡å‹ï¼‰
- æ•°æ®: äº§å“ JSONï¼ˆçº¦ 600 SKUï¼‰ã€å­—æ®µé…ç½®ï¼ˆTBDï¼‰

**è¾“å‡º**:
- äº§ç‰©: `requirements.md`, `interfaces.md`, `subtasks.md`
- è§¦å‘: admin-dashboardï¼ˆäº§å“ç®¡ç†/å¯»ä»·å¤„ç†ï¼‰ï¼Œchat-widgetï¼ˆæ¨è/å¯¹æ¯”ä½“éªŒï¼‰

**çŠ¶æ€**: â¬œ æœªå¼€å§‹ / ğŸŸ¡ è¿›è¡Œä¸­ / âœ… å·²å®Œæˆ

---

### Subtask 4: admin-dashboard

**è·¯å¾„**: `docs/L1/admin-dashboard/`

**èŒè´£**:
- åå°ç®¡ç† UIï¼šäº§å“ JSON ç®¡ç†ã€æ–‡æ¡£ä¸Šä¼ ã€ç´¢å¼•æ„å»º/çŠ¶æ€ã€æ“ä½œæ—¥å¿—
- äººå·¥å®¢æœè½¬æ¥å¤„ç†å…¥å£/å·¥ä½œå°ï¼ˆå½¢æ€ TBDï¼‰
- å¯»ä»·/çº¿ç´¢ç®¡ç†ï¼ˆå­—æ®µä¸æµç¨‹ TBDï¼‰

**è¾“å…¥**:
- æ¥è‡ª: api-core / knowledge-base / product-catalogï¼ˆæ¥å£ä¸æ•°æ®ï¼‰
- æ•°æ®: ç®¡ç†å‘˜æ“ä½œã€äººå·¥å®¢æœå¤„ç†ã€å¯»ä»·çº¿ç´¢æ•°æ®

**è¾“å‡º**:
- äº§ç‰©: `requirements.md`, `interfaces.md`, `subtasks.md`
- è§¦å‘: chat-widgetï¼ˆäººå·¥è½¬æ¥ä¸å¯»ä»·å…¥å£é—­ç¯ï¼‰ï¼Œé›†æˆéªŒæ”¶

**çŠ¶æ€**: â¬œ æœªå¼€å§‹ / ğŸŸ¡ è¿›è¡Œä¸­ / âœ… å·²å®Œæˆ

---

### Subtask 5: chat-widget

**è·¯å¾„**: `docs/L1/chat-widget/`

**èŒè´£**:
- åµŒå…¥å¼ Widgetï¼ˆæœ€å°é›†æˆç¤ºä¾‹ï¼‰ã€å¤šè½®å¯¹è¯ UIã€å¼•ç”¨å±•ç¤º
- AI/äººå·¥å…¥å£åˆ‡æ¢ã€é‚®ç®±éªŒè¯ç ç™»å½•ã€å¯»ä»·ä¸è”ç³»äººå·¥å…¥å£ï¼ˆç™»å½•åè§£é”ï¼‰
- è¯­éŸ³è¾“å…¥/è¾“å‡ºã€å¤šè¯­è¨€ï¼ˆä¸­/è‹±ï¼‰ã€æ–‡ä»¶/å›¾ç‰‡ä¸Šä¼ è¾“å…¥

**è¾“å…¥**:
- æ¥è‡ª: api-coreï¼ˆå¯¹è¯/RAG/ç™»å½•/è½¬æ¥/å¯»ä»·æ¥å£ï¼‰ã€product-catalogï¼ˆæ¨è/å¯¹æ¯”æ¥å£ï¼‰
- æ•°æ®: ç”¨æˆ·æ¶ˆæ¯ã€è¯­éŸ³/æ–‡ä»¶/å›¾ç‰‡ã€ä¸Šä¸‹æ–‡å­—æ®µã€è¯­è¨€é€‰æ‹©ã€æ¨¡å¼é€‰æ‹©

**è¾“å‡º**:
- äº§ç‰©: `requirements.md`, `interfaces.md`, `subtasks.md`
- è§¦å‘: é›†æˆéªŒæ”¶ï¼ˆWidget + åç«¯ + åå°è”è°ƒï¼‰

**çŠ¶æ€**: â¬œ æœªå¼€å§‹ / ğŸŸ¡ è¿›è¡Œä¸­ / âœ… å·²å®Œæˆ

---

## ä¾èµ–å…³ç³»å›¾ (Dependency Graph)

```
api-core
  â”œâ”€â”€ knowledge-base
  â”œâ”€â”€ product-catalog
  â”œâ”€â”€ admin-dashboard
  â””â”€â”€ chat-widget
```

---

## é›†æˆç­–ç•¥ (Integration Strategy)

å½“æ‰€æœ‰ L1 å­ä»»åŠ¡å®Œæˆåï¼š
1. ç³»ç»Ÿé›†æˆæµ‹è¯•ï¼šè¦†ç›– Widgetâ†’APIâ†’pgvectorâ†’LLM çš„ä¸»é“¾è·¯ï¼ˆå«æ¨è/å¯¹æ¯”/ä¸Šä¼ /ç™»å½•/äººå·¥è½¬æ¥/å¯»ä»·ï¼‰
2. æ€§èƒ½åŸºçº¿ï¼šè¾“å‡º p95 å»¶è¿Ÿã€å¹¶å‘ä¸ååæ•°æ®ï¼ˆå£å¾„ä¸è„šæœ¬è§ `docs/L0/requirements.md` çš„ TBDï¼‰
3. å®‰å…¨ä¸åˆè§„ï¼šè¾“å‡ºæ‰«æç»“æœã€å®¡è®¡ä¸è„±æ•ç­–ç•¥è¯´æ˜ï¼ˆå£å¾„è§ TBDï¼‰
